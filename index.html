<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TECHSTORE | Professional Experience</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700;900&display=swap');
        body { font-family: 'Cairo', sans-serif; background: #fdfdfd; overflow-x: hidden; }
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
        .hero-gradient { background: linear-gradient(135deg, #0088ff 0%, #0044ff 100%); }
        .cart-sidebar { transform: translateX(100%); transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .cart-sidebar.open { transform: translateX(0); }
        .product-card { transition: 0.4s; border: 1px solid #f0f0f0; }
        .product-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); border-color: #0088ff; }
        .slider-img { display: none; width: 100%; height: 100%; object-fit: cover; }
        .slider-img.active { display: block; }
    </style>
</head>
<body>

<header class="glass sticky top-0 z-50 border-b shadow-sm py-3">
    <div class="container mx-auto px-4 flex justify-between items-center">
        <div class="flex items-center gap-3 animate__animated animate__fadeInRight">
            <div class="bg-blue-600 p-2 rounded-xl text-white shadow-lg shadow-blue-200"><i class="fa fa-bolt text-xl"></i></div>
            <h1 class="text-2xl font-black tracking-tighter">TECH<span class="text-blue-600">STORE</span></h1>
        </div>
        
        <nav class="hidden lg:flex gap-8 font-bold text-gray-600">
            <a href="#" class="hover:text-blue-600 transition">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="#" class="hover:text-blue-600 transition">Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</a>
            <a href="#" class="hover:text-blue-600 transition">Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª</a>
            <a href="admin.html" class="hover:text-blue-600 transition">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
        </nav>

        <div class="flex items-center gap-5 animate__animated animate__fadeInLeft">
            <button class="bg-blue-600 text-white px-5 py-2 rounded-full text-sm font-bold shadow-md hover:bg-black transition">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            <div onclick="toggleCart(true)" class="relative cursor-pointer">
                <i class="fa fa-shopping-bag text-2xl text-gray-800"></i>
                <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-[10px] rounded-full w-5 h-5 flex items-center justify-center font-bold">0</span>
            </div>
        </div>
    </div>
</header>

<section class="container mx-auto mt-6 px-4" data-aos="zoom-in">
    <div id="main-slider" class="relative h-[250px] md:h-[500px] rounded-[2rem] overflow-hidden shadow-2xl bg-gray-100">
        </div>
</section>

<section class="container mx-auto mt-12 px-4" data-aos="fade-up">
    <div class="flex gap-4 overflow-x-auto pb-4 scrollbar-hide">
        <button onclick="filter('Ø§Ù„ÙƒÙ„', this)" class="cat-btn active bg-blue-600 text-white px-8 py-3 rounded-2xl font-bold border shadow-lg">Ø§Ù„ÙƒÙ„</button>
        <button onclick="filter('Ù…ÙˆØ¨Ø§ÙŠÙ„Ø§Øª', this)" class="cat-btn bg-white px-8 py-3 rounded-2xl font-bold border hover:bg-blue-50 transition">Ù…ÙˆØ¨Ø§ÙŠÙ„Ø§Øª</button>
        <button onclick="filter('Ù„Ø§Ø¨ØªÙˆØ¨Ø§Øª', this)" class="cat-btn bg-white px-8 py-3 rounded-2xl font-bold border hover:bg-blue-50 transition">Ù„Ø§Ø¨ØªÙˆØ¨Ø§Øª</button>
        <button onclick="filter('Ø³Ù…Ø§Ø¹Ø§Øª', this)" class="cat-btn bg-white px-8 py-3 rounded-2xl font-bold border hover:bg-blue-50 transition">Ø³Ù…Ø§Ø¹Ø§Øª</button>
        <button onclick="filter('Ø³Ø§Ø¹Ø§Øª', this)" class="cat-btn bg-white px-8 py-3 rounded-2xl font-bold border hover:bg-blue-50 transition">Ø³Ø§Ø¹Ø§Øª</button>
    </div>
</section>

<main class="container mx-auto px-4 py-16">
    <div class="flex items-center gap-3 mb-10" data-aos="fade-right">
        <div class="w-2 h-10 bg-blue-600 rounded-full"></div>
        <h2 class="text-3xl font-black">Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©</h2>
    </div>
    <div id="product-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8">
        </div>
</main>

<div id="cart-overlay" class="fixed inset-0 bg-black/60 z-[60] hidden backdrop-blur-sm" onclick="toggleCart(false)"></div>
<div id="cart-sidebar" class="cart-sidebar fixed top-0 right-0 w-full max-w-md h-full bg-white z-[70] shadow-2xl p-8 flex flex-col">
    <div class="flex justify-between items-center mb-8">
        <h2 class="text-3xl font-black">Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h2>
        <button onclick="toggleCart(false)" class="text-3xl">&times;</button>
    </div>
    
    <div id="cart-items" class="flex-1 overflow-y-auto space-y-5 pr-2"></div>
    
    <div class="border-t pt-6 space-y-4">
        <div class="flex justify-between text-2xl font-black"><span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span> <span id="cart-total" class="text-blue-600">0</span> Ø¬.Ù…</div>
        
        <div class="bg-gray-50 p-5 rounded-3xl space-y-3">
            <h4 class="font-bold text-sm border-b pb-2">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ Ø¨Ø§Ù„ØªÙØµÙŠÙ„ ğŸ“</h4>
            <input id="c-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" class="w-full border-none bg-white p-3 rounded-xl shadow-sm text-sm">
            <input id="c-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" class="w-full border-none bg-white p-3 rounded-xl shadow-sm text-sm">
            <div class="grid grid-cols-3 gap-2">
                <input id="c-house" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…Ù†Ø²Ù„" class="border-none bg-white p-3 rounded-xl shadow-sm text-xs">
                <input id="c-floor" placeholder="Ø§Ù„Ø¯ÙˆØ±" class="border-none bg-white p-3 rounded-xl shadow-sm text-xs">
                <input id="c-flat" placeholder="Ø§Ù„Ø´Ù‚Ø©" class="border-none bg-white p-3 rounded-xl shadow-sm text-xs">
            </div>
            <textarea id="c-address" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„ (Ø§Ù„Ù…Ù†Ø·Ù‚Ø© ÙˆØ§Ù„Ø´Ø§Ø±Ø¹)" class="w-full border-none bg-white p-3 rounded-xl shadow-sm text-sm h-20"></textarea>
        </div>
        
        <button onclick="submitOrder()" class="w-full bg-blue-600 text-white py-5 rounded-3xl font-black text-xl shadow-xl shadow-blue-200 hover:bg-black transition-all">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø£ÙˆØ±Ø¯Ø± Ø§Ù„Ø¢Ù†</button>
    </div>
</div>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
    AOS.init();
    const DB = "https://tech-store-71bce-default-rtdb.firebaseio.com/";
    let products = {}, cart = [];

    async function loadSite() {
        // Slider
        const sRes = await fetch(DB + "ads.json");
        const sData = await sRes.json();
        if(sData) {
            const cont = document.getElementById('main-slider');
            cont.innerHTML = Object.values(sData).map((img, i) => `<img src="${img}" class="slider-img animate__animated animate__fadeIn ${i===0?'active':''}">`).join('');
            let idx = 0;
            const imgs = document.querySelectorAll('.slider-img');
            if(imgs.length > 1) setInterval(() => {
                imgs[idx].classList.remove('active');
                idx = (idx + 1) % imgs.length;
                imgs[idx].classList.add('active');
            }, 5000);
        }

        // Products
        const pRes = await fetch(DB + "products.json");
        products = await pRes.json() || {};
        renderProducts(products);
    }

    function renderProducts(data) {
        const grid = document.getElementById('product-grid');
        grid.innerHTML = Object.keys(data).map(k => `
            <div class="product-card bg-white p-5 rounded-[2.5rem] relative" data-aos="fade-up">
                <img src="${data[k].mainImg}" class="h-44 w-full object-contain mb-4">
                <h4 class="font-bold text-sm h-10 overflow-hidden text-gray-700">${data[k].name}</h4>
                <div class="flex justify-between items-center mt-5">
                    <span class="text-blue-600 font-black text-xl">${data[k].price} Ø¬.Ù…</span>
                    <button onclick="addToCart('${k}')" class="bg-blue-600 text-white w-10 h-10 rounded-full shadow-lg"><i class="fa fa-plus"></i></button>
                </div>
            </div>
        `).join('');
    }

    function addToCart(id) {
        const p = products[id];
        cart.push({ n: p.name, p: p.price, i: p.mainImg });
        updateCart();
    }

    function updateCart() {
        document.getElementById('cart-count').innerText = cart.length;
        const list = document.getElementById('cart-items');
        let total = 0;
        list.innerHTML = cart.map((item, i) => {
            total += parseInt(item.p);
            return `<div class="flex gap-4 items-center animate__animated animate__fadeInRight">
                <img src="${item.i}" class="w-16 h-16 object-cover rounded-2xl border">
                <div class="flex-1 font-bold text-sm">${item.n}<br><span class="text-blue-600">${item.p} Ø¬.Ù…</span></div>
                <button onclick="cart.splice(${i},1);updateCart()" class="text-red-500 font-bold text-xl">&times;</button>
            </div>`;
        }).join('');
        document.getElementById('cart-total').innerText = total;
    }

    function toggleCart(show) {
        document.getElementById('cart-sidebar').classList.toggle('open', show);
        document.getElementById('cart-overlay').classList.toggle('hidden', !show);
    }

    async function submitOrder() {
        if(cart.length === 0) return alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!');
        const order = {
            customer: document.getElementById('c-name').value,
            phone: document.getElementById('c-phone').value,
            details: `Ù…Ù†Ø²Ù„: ${document.getElementById('c-house').value}, Ø¯ÙˆØ±: ${document.getElementById('c-floor').value}, Ø´Ù‚Ø©: ${document.getElementById('c-flat').value}`,
            address: document.getElementById('c-address').value,
            items: cart,
            total: document.getElementById('cart-total').innerText,
            date: new Date().toLocaleString()
        };
        await fetch(DB + "orders.json", { method: 'POST', body: JSON.stringify(order) });
        alert('ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ ÙŠØ§ Ù„Ø¤ÙŠ! ğŸš€');
        cart = []; location.reload();
    }

    loadSite();
</script>
</body>
</html>
