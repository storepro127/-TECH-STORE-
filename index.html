<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TECHSTORE | Professional Experience</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        body { font-family: 'Cairo', sans-serif; background: #fff; }
        .cart-sidebar { transform: translateX(100%); transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .cart-sidebar.open { transform: translateX(0); }
        .product-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .slider-img { display: none; width: 100%; height: 100%; object-fit: cover; }
        .slider-img.active { display: block; animation: zoomIn 1s; }
    </style>
</head>
<body class="bg-slate-50">

<header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b shadow-sm py-4">
    <div class="container mx-auto px-4 flex justify-between items-center">
        <div class="flex items-center gap-3 cursor-pointer" onclick="location.reload()">
            <div class="bg-blue-600 p-2 rounded-xl text-white shadow-lg"><i class="fa fa-bolt"></i></div>
            <h1 class="text-2xl font-black">TECH<span class="text-blue-600">STORE</span></h1>
        </div>
        <nav class="hidden md:flex gap-8 font-bold text-gray-600">
            <a href="#" class="hover:text-blue-600 transition">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="#" class="hover:text-blue-600 transition">Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</a>
            <a href="#" class="hover:text-blue-600 transition">Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª</a>
        </nav>
        <div class="flex items-center gap-6">
            <button class="text-sm font-bold text-blue-600 border-2 border-blue-600 px-4 py-2 rounded-full hover:bg-blue-600 hover:text-white transition">Ø¯Ø®ÙˆÙ„</button>
            <div onclick="toggleCart(true)" class="relative cursor-pointer">
                <i class="fa fa-shopping-bag text-2xl"></i>
                <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-[10px] rounded-full w-5 h-5 flex items-center justify-center font-bold">0</span>
            </div>
        </div>
    </div>
</header>

<section class="container mx-auto mt-6 px-4">
    <div id="main-slider" class="relative h-[250px] md:h-[450px] rounded-[2.5rem] overflow-hidden shadow-2xl bg-gray-100"></div>
</section>

<main class="container mx-auto px-4 py-16">
    <h2 class="text-3xl font-black mb-12 flex items-center gap-3 animate__animated animate__fadeInRight">
        <span class="w-2 h-10 bg-blue-600 rounded-full"></span> Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©
    </h2>
    <div id="product-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-8"></div>
</main>

<div id="cart-overlay" class="fixed inset-0 bg-black/60 z-[60] hidden backdrop-blur-sm" onclick="toggleCart(false)"></div>
<div id="cart-sidebar" class="cart-sidebar fixed top-0 right-0 w-full max-w-md h-full bg-white z-[70] shadow-2xl p-8 flex flex-col">
    <h2 class="text-3xl font-black mb-8 italic">Ø³Ù„ØªÙƒ</h2>
    <div id="cart-items" class="flex-1 overflow-y-auto space-y-4 pr-2"></div>
    <div class="border-t pt-6 space-y-4">
        <div class="flex justify-between text-2xl font-black"><span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span> <span id="cart-total" class="text-blue-600">0</span> Ø¬.Ù…</div>
        <div class="flex gap-2">
            <input id="coupon" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ…" class="flex-1 border p-3 rounded-xl outline-none focus:border-blue-600">
            <button onclick="applyCoupon()" class="bg-black text-white px-6 rounded-xl font-bold">ØªØ·Ø¨ÙŠÙ‚</button>
        </div>
        <div class="bg-gray-100 p-5 rounded-3xl space-y-3">
            <input id="c-name" placeholder="Ø§Ù„Ø§Ø³Ù…" class="w-full p-3 rounded-xl text-sm border-none shadow-sm">
            <input id="c-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„" class="w-full p-3 rounded-xl text-sm border-none shadow-sm">
            <div class="grid grid-cols-3 gap-2">
                <input id="c-house" placeholder="Ù…Ù†Ø²Ù„" class="p-3 rounded-xl text-xs border-none shadow-sm">
                <input id="c-floor" placeholder="Ø¯ÙˆØ±" class="p-3 rounded-xl text-xs border-none shadow-sm">
                <input id="c-flat" placeholder="Ø´Ù‚Ø©" class="p-3 rounded-xl text-xs border-none shadow-sm">
            </div>
            <textarea id="c-address" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„" class="w-full p-3 rounded-xl text-sm border-none shadow-sm h-16"></textarea>
        </div>
        <button onclick="submitOrder()" class="w-full bg-blue-600 text-white py-5 rounded-3xl font-black text-xl shadow-lg shadow-blue-200">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>
    </div>
</div>

<footer class="bg-slate-900 text-white py-12 text-center mt-20">
    <p class="font-bold text-gray-400">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; 2026 TECHSTORE - Ù„Ø¤ÙŠ</p>
</footer>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
    AOS.init();
    const DB = "https://tech-store-71bce-default-rtdb.firebaseio.com/";
    let products = {}, cart = [], discountPerc = 0;

    async function init() {
        const sRes = await fetch(DB + "ads.json");
        const sData = await sRes.json();
        if(sData) {
            const cont = document.getElementById('main-slider');
            cont.innerHTML = Object.values(sData).map((img, i) => `<img src="${img}" class="slider-img animate__animated animate__fadeIn ${i===0?'active':''}">`).join('');
            let idx = 0; const imgs = document.querySelectorAll('.slider-img');
            if(imgs.length > 1) setInterval(() => { imgs[idx].classList.remove('active'); idx = (idx + 1) % imgs.length; imgs[idx].classList.add('active'); }, 5000);
        }
        const pRes = await fetch(DB + "products.json");
        products = await pRes.json() || {};
        render(products);
    }

    function render(data) {
        document.getElementById('product-grid').innerHTML = Object.keys(data).map(k => `
            <div class="product-card bg-white p-5 rounded-[2.5rem] border" data-aos="fade-up">
                <img src="${data[k].mainImg}" class="h-40 w-full object-contain mb-4">
                <h4 class="font-bold text-sm h-10 overflow-hidden">${data[k].name}</h4>
                <div class="flex justify-between items-center mt-5">
                    <span class="text-blue-600 font-black text-xl">${data[k].price} Ø¬.Ù…</span>
                    <button onclick="addToCart('${k}')" class="bg-blue-600 text-white w-10 h-10 rounded-full"><i class="fa fa-plus"></i></button>
                </div>
            </div>`).join('');
    }

    function addToCart(id) { cart.push(products[id]); updateUI(); }
    function toggleCart(s) { document.getElementById('cart-sidebar').classList.toggle('open', s); document.getElementById('cart-overlay').classList.toggle('hidden', !s); }

    function updateUI() {
        document.getElementById('cart-count').innerText = cart.length;
        let sub = 0;
        document.getElementById('cart-items').innerHTML = cart.map((i, idx) => {
            sub += parseInt(i.price);
            return `<div class="flex gap-4 items-center bg-gray-50 p-3 rounded-2xl">
                <img src="${i.mainImg}" class="w-14 h-14 object-cover rounded-xl border">
                <div class="flex-1 font-bold text-xs">${i.name}<br><span class="text-blue-600">${i.price} Ø¬.Ù…</span></div>
                <button onclick="cart.splice(${idx},1);updateUI()" class="text-red-500 font-bold">&times;</button>
            </div>`;
        }).join('');
        document.getElementById('cart-total').innerText = (sub - (sub * (discountPerc/100))).toFixed(0);
    }

    async function applyCoupon() {
        const code = document.getElementById('coupon').value.toUpperCase();
        const res = await fetch(DB + "coupons.json");
        const data = await res.json();
        const found = Object.values(data || {}).find(c => c.code === code);
        if(found) { discountPerc = found.perc; alert('ØªÙ… Ø§Ù„Ø®ØµÙ…! ğŸ‰'); updateUI(); }
        else alert('Ø§Ù„ÙƒÙˆØ¯ ØºÙ„Ø·');
    }

    async function submitOrder() {
        if(cart.length === 0) return alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø¶ÙŠØ©!');
        const order = {
            customer: document.getElementById('c-name').value,
            phone: document.getElementById('c-phone').value,
            address: `${document.getElementById('c-address').value} (Ù…Ù†Ø²Ù„:${document.getElementById('c-house').value}, Ø¯ÙˆØ±:${document.getElementById('c-floor').value}, Ø´Ù‚Ø©:${document.getElementById('c-flat').value})`,
            items: cart,
            total: document.getElementById('cart-total').innerText,
            date: new Date().toLocaleString()
        };
        await fetch(DB + "orders.json", { method: 'POST', body: JSON.stringify(order) });
        alert('ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨Ùƒ! ğŸš€'); cart = []; location.reload();
    }
    init();
</script>
</body>
</html>
